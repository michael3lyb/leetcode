<html>
<head>
  <title>309. Best Time to Buy and Sell Stock with Cooldown</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (en-US, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="2355"/>
<h1>309. Best Time to Buy and Sell Stock with Cooldown</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>6/4/2016 5:50 AM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>7/31/2016 4:57 AM</i></td></tr>
<tr><td><b>Tags:</b></td><td><i>Dynamic Programming, leetcode tag, Medium</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div><a href="https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/">https://leetcode.com/problems/best-time-to-buy-and-sell-stock-with-cooldown/</a></div><div><br/></div><div>思路:</div><div><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">The series of problems are typical dp. The key for dp is to find the variables to represent the <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">states</span> and <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">deduce the transition function</span>.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Of course one may come up with a O(1) space solution directly, but I think it is better to be generous when you think and be greedy when you implement.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">The natural states for this problem is the 3 possible transactions : <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy</code>, <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">sell</code>, <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest</code>. Here <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest</code> means no transaction on that day (aka cooldown).</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Then the transaction sequences can end with any of these three states.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">For each of them we make an array, <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy[n]</code>, <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">sell[n]</code> and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest[n]</code>.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy[i]</code> means before day <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i</code> what is the maxProfit for any sequence <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">end with <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy</code></span>.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">sell[i]</code> means before day <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i</code> what is the maxProfit for any sequence <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">end with <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">sell</code></span>.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest[i]</code> means before day <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i</code> what is the maxProfit for any sequence <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">end with <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest</code></span>.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Then we want to deduce the transition functions for <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy</code> <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">sell</code> and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest</code>. By definition we have:</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre; display: inline-block; overflow-x: auto; word-wrap: normal; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box;">buy[i]</span>  = max(rest[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>]-price, buy[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>]) 
<span style="box-sizing: border-box;">sell[i]</span> = max(buy[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>]+price, sell[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>])
<span style="box-sizing: border-box;">rest[i]</span> = max(sell[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>], buy[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>], rest[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>])
</code></pre><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Where <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">price</code> is the price of day <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i</code>. All of these are very straightforward. They simply represents :</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre; display: inline-block; overflow-x: auto; word-wrap: normal; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;">(<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>) We have to `<span style="box-sizing: border-box;">rest</span>` before we `<span style="box-sizing: border-box;">buy</span>` <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">and</span> 
(<span style="box-sizing: border-box; color: rgb(0, 128, 128);">2</span>) we have to `<span style="box-sizing: border-box;">buy</span>` before we `<span style="box-sizing: border-box;">sell</span>`
</code></pre><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">One tricky point is how do you make sure you <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">sell</code> before you <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy</code>, since from the equations it seems that <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">[buy, rest, buy]</code> is entirely possible.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Well, the answer lies within the fact that <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy[i] &lt;= rest[i]</code> which means <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest[i] = max(sell[i-1], rest[i-1])</code>. That made sure<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">[buy, rest, buy]</code> is never occurred.</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">A further observation is that and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">rest[i] &lt;= sell[i]</code> is also true therefore</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre; display: inline-block; overflow-x: auto; word-wrap: normal; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box;">rest[i]</span> = sell[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>]
</code></pre><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Substitute this in to <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">buy[i]</code> we now have 2 functions instead of 3:</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre; display: inline-block; overflow-x: auto; word-wrap: normal; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box;">buy[i]</span> = max(sell[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">2</span>]-price, buy[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>])
<span style="box-sizing: border-box;">sell[i]</span> = max(buy[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>]+price, sell[i-<span style="box-sizing: border-box; color: rgb(0, 128, 128);">1</span>])
</code></pre><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">This is better than 3, but</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong style="box-sizing: border-box; font-weight: bold;">we can do even better</strong></p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Since states of day <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i</code> relies only on <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i-1</code> and <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">i-2</code> we can reduce the O(n) space to O(1). And here we are at our final solution:</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong style="box-sizing: border-box; font-weight: bold;">Java</strong></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre; display: inline-block; overflow-x: auto; word-wrap: normal; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">public</span> <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span> <span style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">maxProfit</span><span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span>[] prices)</span> </span>{
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span> sell = <span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>, prev_sell = <span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>, buy = Integer.MIN_VALUE, prev_buy;
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">for</span> (<span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span> price : prices) {
        prev_buy = buy;
        buy = Math.max(prev_sell - price, prev_buy);
        prev_sell = sell;
        sell = Math.max(prev_buy + price, prev_sell);
    }
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> sell;
}
</code></pre><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong style="box-sizing: border-box; font-weight: bold;">C++</strong></p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; white-space: pre; display: inline-block; overflow-x: auto; word-wrap: normal; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span> <span style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">maxProfit</span><span style="box-sizing: border-box;">(vector&lt;<span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span>&gt; &amp;prices)</span> </span>{
    <span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span> <span style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">buy</span><span style="box-sizing: border-box;">(INT_MIN)</span>, <span style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">sell</span><span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>)</span>, <span style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">prev_sell</span><span style="box-sizing: border-box;">(<span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>)</span>, prev_buy</span>;
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">for</span> (<span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">int</span> price : prices) {
        prev_buy = buy;
        buy = max(prev_sell - price, buy);
        prev_sell = sell;
        sell = max(prev_buy + price, sell);
    }
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> sell;
}
</code></pre><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">For this problem it is ok to use <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 2px 4px; color: rgb(199, 37, 78); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; background-color: rgb(249, 242, 244);">INT_MIN</code> as initial value, but in general we would like to avoid this. We can do the same as the following python:</p><p style="box-sizing: border-box; margin: 0px; padding: 0px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><strong style="box-sizing: border-box; font-weight: bold;">Python</strong></p><div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; display: block; padding: 9.5px; margin: 1rem 0px 10px; color: rgb(51, 51, 51); border: none; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; max-height: 600px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; text-align: left; text-indent: 0px; text-transform: none; widows: 1; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; padding: 0.5em; color: rgb(51, 51, 51); border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; display: inline-block; overflow-x: auto; min-width: 100%; background-color: rgb(248, 248, 248); background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">def</span> <span style="box-sizing: border-box; color: rgb(153, 0, 0); font-weight: bold;">maxProfit</span><span style="box-sizing: border-box;">(self, prices)</span>:</span><br/>
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">if</span> len(prices) &lt; <span style="box-sizing: border-box; color: rgb(0, 128, 128);">2</span>:<br/>
        <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> <span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span><br/>
    sell, buy, prev_sell, prev_buy = <span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>, -prices[<span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>], <span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span>, <span style="box-sizing: border-box; color: rgb(0, 128, 128);">0</span><br/>
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">for</span> price <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">in</span> prices:<br/>
        prev_buy = buy<br/>
        buy = max(prev_sell - price, prev_buy)<br/>
        prev_sell = sell<br/>
        sell = max(prev_buy + price, prev_sell)<br/>
    <span style="box-sizing: border-box; color: rgb(51, 51, 51); font-weight: bold;">return</span> sell</code></div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div>public class Solution {</div><div>    public int maxProfit(int[] prices) {</div><div>        int sell = 0, prev_sell = 0;</div><div>        int buy = Integer.MIN_VALUE;</div><div>        int prev_buy = Integer.MIN_VALUE;</div><div>        for (int price : prices) {</div><div>            prev_buy = buy;</div><div>            buy = Math.max(prev_sell - price, prev_buy);</div><div>            prev_sell = sell;</div><div>            sell = Math.max(prev_buy + price, prev_sell);</div><div><br/></div><div>            System.out.println(&quot;prev_buy:&quot;+prev_buy);</div><div>            System.out.println(&quot;buy:&quot;+buy);</div><div>            System.out.println(&quot;prev_sell:&quot;+prev_sell);</div><div>            System.out.println(&quot;sell:&quot;+sell);</div><div>            System.out.println();</div><div>        }</div><div>        return sell;</div><div>    }</div><div>}</div></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.148438);"><div>prev_buy:-2147483648</div><div>buy:-1</div><div>prev_sell:0</div><div>sell:0</div><div><br/></div><div>prev_buy:-1</div><div>buy:-1</div><div>prev_sell:0</div><div>sell:1</div><div><br/></div><div>prev_buy:-1</div><div>buy:-1</div><div>prev_sell:1</div><div>sell:2</div><div><br/></div><div>prev_buy:-1</div><div>buy:1</div><div>prev_sell:2</div><div>sell:2</div><div><br/></div><div>prev_buy:1</div><div>buy:1</div><div>prev_sell:2</div><div>sell:3</div></div><div><br/></div></span>
</div></body></html> 