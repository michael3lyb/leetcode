<html>
<head>
  <title>276. Paint Fence</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/304720 (en-US, DDL); Windows/10.0.14393 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 12pt;
    }
  </style>
</head>
<body>
<a name="1188"/>
<h1>276. Paint Fence</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>Created:</b></td><td><i>12/27/2016 1:20 PM</i></td></tr>
<tr><td><b>Updated:</b></td><td><i>12/27/2016 3:27 PM</i></td></tr>
<tr><td><b>Tags:</b></td><td><i>*, Dynamic Programming, Easy, leetcode tag</i></td></tr>
</table>
</div>
<br/>

<div>
<span><div>O(n) time java solution, O(1) space</div><div><br/></div><div><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(68, 68, 68); background: rgb(240, 240, 240); border-radius: 0px; white-space: pre-wrap; display: block; overflow-x: auto;"><span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">public</span> <span style="box-sizing: border-box; font-weight: bold;">int</span> <span style="box-sizing: border-box; color: rgb(136, 0, 0); font-weight: bold;">numWays</span><span style="box-sizing: border-box;">(<span style="box-sizing: border-box; font-weight: bold;">int</span> n, <span style="box-sizing: border-box; font-weight: bold;">int</span> k)</span> </span>{
    <span style="box-sizing: border-box; font-weight: bold;">if</span>(n == <span style="box-sizing: border-box; color: rgb(136, 0, 0);">0</span>) <span style="box-sizing: border-box; font-weight: bold;">return</span> <span style="box-sizing: border-box; color: rgb(136, 0, 0);">0</span>;
    <span style="box-sizing: border-box; font-weight: bold;">else</span> <span style="box-sizing: border-box; font-weight: bold;">if</span>(n == <span style="box-sizing: border-box; color: rgb(136, 0, 0);">1</span>) <span style="box-sizing: border-box; font-weight: bold;">return</span> k;
    <span style="box-sizing: border-box; font-weight: bold;">int</span> diffColorCounts = k*(k<span style="box-sizing: border-box; color: rgb(136, 0, 0);">-1</span>);
    <span style="box-sizing: border-box; font-weight: bold;">int</span> sameColorCounts = k;
    <span style="box-sizing: border-box; font-weight: bold;">for</span>(<span style="box-sizing: border-box; font-weight: bold;">int</span> <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">i=<span style="box-sizing: border-box; color: rgb(136, 0, 0);">2</span></span>; i&lt;n; i++) {
        <span style="box-sizing: border-box; font-weight: bold;">int</span> temp = diffColorCounts;
        diffColorCounts = (diffColorCounts + sameColorCounts) * (k<span style="box-sizing: border-box; color: rgb(136, 0, 0);">-1</span>);
        sameColorCounts = temp;
    }
    <span style="box-sizing: border-box; font-weight: bold;">return</span> diffColorCounts + sameColorCounts;
}
</code></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">We divided it into two cases.</p><ol style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 0px 0px 10px;">the last two posts have the same color, the number of ways to paint in this case is <em style="box-sizing: border-box;">sameColorCounts</em>.</p></li><li style="box-sizing: border-box;"><p style="box-sizing: border-box; margin: 0px 0px 10px;">the last two posts have different colors, and the number of ways in this case is <em style="box-sizing: border-box;">diffColorCounts</em>.</p></li></ol><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">The reason why we have these two cases is that we can easily compute both of them, and that is all I do. When adding a new post, we can use the same color as the last one (if allowed) or different color. If we use different color, there're <em style="box-sizing: border-box;">k-1</em> options, and the outcomes shoule belong to the <em style="box-sizing: border-box;">diffColorCounts</em> category. If we use same color, there's only one option, and we can only do this when the last two have different colors (which is the diffColorCounts). There we have our induction step.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Here is an example, let's say we have 3 posts and 3 colors. The first two posts we have 9 ways to do them, (1,1), (1,2), (1,3), (2,1), (2,2), (2,3), (3,1), (3,2), (3,3). Now we know that</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(68, 68, 68); background: rgb(240, 240, 240); border-radius: 0px; white-space: pre-wrap; display: block; overflow-x: auto;"><span style="box-sizing: border-box; font-weight: bold;">diffColorCounts</span> = <span style="box-sizing: border-box; color: rgb(136, 0, 0);">6</span><span style="box-sizing: border-box; color: rgb(136, 136, 136);">;</span></code></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">And</p><pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 13px; display: block; padding: 9.5px; margin: 0px 0px 10px; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-radius: 4px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: inherit; padding: 0.5em; color: rgb(68, 68, 68); background: rgb(240, 240, 240); border-radius: 0px; white-space: pre-wrap; display: block; overflow-x: auto;"><span style="box-sizing: border-box; font-weight: bold;">sameColorCounts</span> = <span style="box-sizing: border-box; color: rgb(136, 0, 0);">3</span><span style="box-sizing: border-box; color: rgb(136, 136, 136);">;</span></code></pre><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Now for the third post, we can compute these two variables like this:</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">If we use different colors than the last one (the second one), these ways can be added into <em style="box-sizing: border-box;">diffColorCounts</em>, so if the last one is 3, we can use 1 or 2, if it's 1, we can use 2 or 3, etc. Apparently there are <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, &quot;Courier New&quot;, monospace; font-size: 12.6px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); border-radius: 4px;">(diffColorCounts + sameColorCounts) * (k-1)</code> possible ways.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">If we use the same color as the last one, we would trigger a violation in these three cases (1,1,1), (2,2,2) and (3,3,3). This is because they already used the same color for the last two posts. So is there a count that rules out these kind of cases? YES, the <em style="box-sizing: border-box;">diffColorCounts</em>. So in cases within <em style="box-sizing: border-box;">diffColorCounts</em>, we can use the same color as the last one without worrying about triggering the violation. And now as we append a same-color post to them, the former <em style="box-sizing: border-box;">diffColorCounts</em> becomes the current <em style="box-sizing: border-box;">sameColorCounts</em>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;, Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);">Then we can keep going until we reach the n. And finally just sum up these two variables as result.</p><div style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-weight: normal; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>Hope this would be clearer.</div></div></div></span>
</div></body></html> 